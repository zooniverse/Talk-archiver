---
eleventyExcludeFromCollections: true
layout: default
pagination:
  data: subjects
  resolve: values
  size: 1
  alias: subject
permalink: "/subjects/{{ subject.zooniverse_id }}/"
eleventyComputed:
  title: "Subject {{ subject.zooniverse_id }}"
  description: "Subject {{ subject.zooniverse_id }} from {{ project.display_name }}."
  ogImage: "{{ subject.location.standard }}"
---
<div class="page-grid subject-page-grid">
  <main class="focus">
    <h1>Subject: {{ subject.zooniverse_id }}</h1>

    {% subjectImage subject, 'standard', 'subject' %}

    <h2>Comments</h2>
    <ul>
    {%- for comment in subject.discussion.comments | reverse -%}
    <li id={{ comment._id }} class="comment">
      <p>
        <a href="/users/{{ comment.user_name | slug }}">
          {% avatar comment.user_name, users[comment.user_id].avatar_url %}
        </a>
        by
        <a href="/users/{{ comment.user_name | slug }}">
          {{ comment.user_name }}
        </a>
        {% if comment.response_to %}
          <a href="#{{ comment.response_to._id }}">in response to {{ comment.response_to.user_name}}'s comment.</a>
        {% endif %}
      </p>

      {%- markdown -%}
        {{ comment.body | safe }}
      {%- endmarkdown -%}

        <p>Posted <time datetime={{ comment.created_at }}>{{ comment.created_at | date }}</time></p>
    </li>
    {%- endfor -%}
    </ul>
  </main>

  <aside>
    <div class="split-column">
      <div>
        <h2>Tags</h2>
        <ul class="tag-list">
          {% for tag in subject.tags %}
            <li><a href="/tags/{{ tag._id or tag }}">{{ tag._id or tag }}</a></li>
          {% endfor %}
        </ul>
      </div>
      <div>
        <h2><a href="./collections.html">Collections</a></h2>
        <ul>
          {%- for collection in subject.collections | limit(3) -%}
            <li>
              {% collectionSummary collection, 3, 'grid-cols-3' %}
            </li>
          {%- endfor -%}
        </ul>
      </div>
    </div>

    <h2>Board Discussions</h2>
    {% for category, categoryDiscussions in discussions | focus(subject.zooniverse_id) %}
      <h3>{{ category | capitalize }}</h3>
      {% featuredDiscussions categoryDiscussions %}
    {% endfor %}
  </aside>
</div>
